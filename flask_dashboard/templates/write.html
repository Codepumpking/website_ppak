<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글쓰기</title>
    <style>
        /* 입력 폼 간격을 위한 간단한 스타일 */
        .form-group { margin-bottom: 15px; }
        .secret-option { 
            padding: 10px; 
            background-color: #f9f9f9; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>글 작성하기</h1>
        
        <form action="/write" method="POST" enctype="multipart/form-data">
            
            <div class="form-group">
                <input type="text" name="title" placeholder="제목을 입력하세요" style="width: 100%; padding: 10px;" required>
            </div>
            
            <div class="form-group">
                <textarea name="content" placeholder="내용을 입력하세요" rows="10" style="width: 100%; padding: 10px;" required></textarea>
            </div>

            <div class="form-group">
                <label for="file">첨부파일:</label>
                <input type="file" name="file" id="file">
            </div>

            <div class="secret-option">
                <label>
                    <input type="checkbox" name="is_secret" id="secret_check" onclick="togglePassword()"> 
                    비밀글로 작성
                </label>
                <input type="password" name="post_pw" id="post_pw" placeholder="게시글 비밀번호 (4자리)" disabled style="margin-left: 10px;">
            </div>

            <button type="submit" class="btn-primary">등록</button>
            <button type="button" class="btn-cancel-post" onclick="location.href='/'">취소</button>
        </form>
    </div>

    <script>
        function togglePassword() {
            var checkBox = document.getElementById("secret_check");
            var pwInput = document.getElementById("post_pw");
            
            if (checkBox.checked == true){
                pwInput.disabled = false; // 입력 가능하게 변경
                pwInput.required = true;  // 필수 입력으로 변경
            } else {
                pwInput.disabled = true;  // 입력 불가능하게 변경
                pwInput.required = false; // 필수 해제
                pwInput.value = '';       // 입력 내용 초기화
            }
        }
    </script>
</body>
</html>